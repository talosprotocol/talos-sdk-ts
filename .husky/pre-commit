#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

set -e

echo "ğŸ” Running pre-commit validation..."

# 1. Version bump
echo "ğŸ“¦ Syncing version..."
npm run version:sync

# 2. Contract compliance gates
echo "ğŸ”’ Running contract compliance gates..."
npm run gates:contracts

# 3. Lint-staged
echo "âœ¨ Running lint-staged..."
npx lint-staged

# 4. Typecheck
echo "ğŸ“ Running typecheck..."
npm run typecheck

# 5. Tests
echo "ğŸ§ª Running tests..."
npm run test

# 6. Stage version bump
git add package.json

echo "âœ… All pre-commit checks passed"
